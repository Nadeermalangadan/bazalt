!function(){define("bz.pages/app",["angular","bz","ngTable","ng-editable-tree"],function(a){"use strict";return a.module("bz.pages",["bz","ngTable","ngEditableTree"])}),define("bz.pages/factories/page",["bz.pages/app"],function(a){"use strict";a.factory("bz.pages.factories.page",["$resource","bzConfig",function(a,b){var c=a(b.resource("/pages/:id"),{id:"@id"},{hit:{method:"PUT",params:{action:"view"}}});return c}])}),define("bz.pages/controllers/page",["bz.pages/app","bz.pages/factories/page"],function(a){"use strict";a.controller("bz.pages.controllers.page",["$scope","page","bz.pages.factories.page",function(a,b,c){a.page=b,c.hit({id:b.id})}])}),define("bz.pages/factories/category",["bz.pages/app"],function(a){"use strict";a.factory("bz.pages.factories.category",["ngNestedResource","bzConfig",function(a,b){var c=a(b.resource("/pages/categories/:id"),{id:"@id"},{});return c}])}),define("bz.pages/controllers/category",["bz.pages/app","bz.pages/factories/category"],function(a){"use strict";a.controller("bz.pages.controllers.category",["$scope","bz.pages.factories.page","ngTableParams","$log","category","pageParams",function(a,b,c,d,e,f){d.debug('Controller "bz.pages.controllers.category": ',e,f),a.category=e,f=f||{},a.tableParams=new c({page:1,total:0,count:10,sorting:{name:"asc"}},{counts:[],getData:function(c,e){a.loading=!0;var f=e.url();f.category_id=a.category.id,b.get(f,function(b){d.debug("Load pages: ",b),a.loading=!1,a.tableParams.total(b.pager.total),c.resolve(a.pages=b.data)})}})}])}),define("bz.pages/controllers/widget/category",["bz.pages/app"],function(a){"use strict";a.controller("bz.pages.controllers.widget.category",["$scope","widget","ngTableParams","bz.pages.factories.page",function(a,b,c,d){a.tableParams=new c({page:1,total:0,count:10,sorting:{name:"asc"}}),a.$watch("tableParams",function(){a.loading=!0;var c=b.$settings;c.truncate=500,d.get(c,function(b){a.loading=!1,a.pagesList=b.data,a.tableParams.total=b.pager.total})},!0)}])}),define("bz/pages",["bz.pages/app","bz.pages/controllers/page","bz.pages/controllers/category","bz.pages/controllers/widget/category"],function(a){return a.config(["bzConfigProvider","bzWidgetsProvider",function(a,b){b.add({id:"bcPages.Widgets.Page",title:"Виджет страница",component:"Страницы",templateUrl:a.templateUrl("/views/widgets/pages/page.html"),resolve:{page:["$q","bz.pages.factories.page","bzWidget",function(b,c,d){var e=b.defer();return c.get({id:d.$settings.id},function(b){b.template=a.templateUrl("/views/pages/default.html"),e.resolve(b)},function(){e.reject(b.reject({}))}),e.promise}]}}),b.add({id:"bcPages.Widgets.Category",title:"Виджет категория страниц",component:"Страницы",templateUrl:a.templateUrl("/views/widgets/pages/category.html"),controller:"bz.pages.controllers.widget.category"})}]),a})}();
//# sourceMappingURL=pages.map